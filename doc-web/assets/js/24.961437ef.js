(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{351:function(e,a,t){"use strict";t.r(a);var r=t(7),s=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"全局安全模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局安全模式"}},[e._v("#")]),e._v(" 全局安全模式")]),e._v(" "),a("blockquote",[a("p",[e._v("开启后可以检测租户插件和"),a("code",[e._v("LambdaQueryWrapper 使用中可能出现的")]),e._v("sql注入`\n"),a("a",{attrs:{href:"https://baomidou.com/pages/110sec/",target:"_blank",rel:"noopener noreferrer"}},[e._v("关于MybatisPlus使用的安全漏洞说明"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[e._v("#")]),e._v(" 配置")]),e._v(" "),a("p",[e._v("在"),a("code",[e._v("application.yml")]),e._v("引入"),a("code",[e._v("safe-mode")]),e._v("配置项，"),a("code",[e._v("on")]),e._v("为开启，"),a("code",[e._v("off")]),e._v("为关闭")]),e._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("stream-query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("  \n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("mybatis-plus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("  \n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("safe-mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" on\n")])])]),a("h3",{attrs:{id:"租户插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#租户插件"}},[e._v("#")]),e._v(" 租户插件")]),e._v(" "),a("p",[e._v("为了防止"),a("code",[e._v("租户id")]),e._v("可能引发的"),a("code",[e._v("sql注入")]),e._v("问题，在开启"),a("code",[e._v("safe-mode")]),e._v("后，请使用"),a("code",[e._v("SqTenantLineInnerInterceptor")]),e._v("替换"),a("code",[e._v("MybatisPlus")]),e._v("的租户插件。")]),e._v(" "),a("p",[e._v("报错提示如下：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SQL Injection attempt detected in 'TenantLineInnerInterceptor\n")])])]),a("h3",{attrs:{id:"lambdaquerywrapper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lambdaquerywrapper"}},[e._v("#")]),e._v(" LambdaQueryWrapper")]),e._v(" "),a("p",[e._v("请在开启"),a("code",[e._v("safe-mode")]),e._v("后，使用"),a("code",[e._v("QueryCondition")]),e._v("来取代原先的"),a("code",[e._v("LambdaQueryWrapper")]),e._v("，条件拼接方法是一样的。"),a("code",[e._v("QueryCondition")]),e._v("同时还支持"),a("code",[e._v("TypeHandler")]),e._v("。具体使用"),a("a",{attrs:{href:""}},[e._v("QueryCondition")])]),e._v(" "),a("p",[e._v("报错提示如下")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SQL Injection attempt detected in 'apply'\n")])])]),a("h2",{attrs:{id:"测试用例地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试用例地址"}},[e._v("#")]),e._v(" 测试用例地址")]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://gitee.com/dromara/stream-query/blob/main/stream-plugin/stream-plugin-mybatis-plus/src/test/java/org/dromara/streamquery/stream/plugin/mybatisplus/safe/SqlInjectionWrapperTest.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("safe-mode-wrapper"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/stream-query/blob/main/stream-plugin/stream-plugin-mybatis-plus/src/test/java/org/dromara/streamquery/stream/plugin/mybatisplus/safe/SqlInjectionTenantTest.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("safe-mode-Tenant"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);